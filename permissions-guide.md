# Инструкция по правам доступа для проекта Michurina_55

## Введение

Данная инструкция содержит подробную информацию о правах доступа, которые необходимо установить для файлов и папок проекта Michurina_55 при размещении на хостинге. Правильная настройка прав доступа критически важна для корректной работы сайта и админ-панели.

## Автоматическая установка прав доступа

Для удобства в проект добавлен скрипт `update-permissions.sh`, который автоматически устанавливает все необходимые права доступа. Рекомендуется использовать этот скрипт после загрузки файлов на хостинг.

### Как использовать скрипт:

1. Загрузите все файлы проекта на хостинг
2. Подключитесь к хостингу через SSH или используйте функцию "Выполнить команду" в панели управления хостингом
3. Перейдите в директорию с проектом: `cd /путь/к/проекту`
4. Сделайте скрипт исполняемым: `chmod +x update-permissions.sh`
5. Запустите скрипт: `./update-permissions.sh`

## Ручная установка прав доступа

Если по каким-то причинам вы не можете использовать скрипт, ниже приведены инструкции по ручной установке прав доступа.

### Файлы данных:

| Файл | Права | Команда |
|------|-------|---------|
| data.json | 666 (rw-rw-rw-) | `chmod 666 data.json` |
| update-prices-errors.log | 666 (rw-rw-rw-) | `chmod 666 update-prices-errors.log` |
| translations-sync-errors.log | 666 (rw-rw-rw-) | `chmod 666 translations-sync-errors.log` |

### PHP скрипты:

| Файл | Права | Команда |
|------|-------|---------|
| save-data.php | 644 (rw-r--r--) | `chmod 644 save-data.php` |
| save-translations.php | 644 (rw-r--r--) | `chmod 644 save-translations.php` |
| update-prices.php | 644 (rw-r--r--) | `chmod 644 update-prices.php` |

### JavaScript файлы:

| Файл | Права | Команда |
|------|-------|---------|
| assets/js/*.js | 644 (rw-r--r--) | `chmod 644 assets/js/*.js` |

### HTML файлы:

| Файл | Права | Команда |
|------|-------|---------|
| *.html | 644 (rw-r--r--) | `chmod 644 *.html` |

### Директории:

| Директория | Права | Команда | Примечание |
|------------|-------|---------|------------|
| assets/images | 755 (rwxr-xr-x) | `chmod -R 755 assets/images` | Рекурсивно для всех поддиректорий и файлов |
| assets/uploads | 777 (rwxrwxrwx) | `chmod 777 assets/uploads` | Директория для загрузки новых изображений |
| assets/js | 755 (rwxr-xr-x) | `chmod 755 assets/js` | Только для директории, не для файлов |
| assets/css | 755 (rwxr-xr-x) | `chmod 755 assets/css` | Только для директории, не для файлов |

### Конфигурационные файлы:

| Файл | Права | Команда |
|------|-------|---------|
| .htaccess | 644 (rw-r--r--) | `chmod 644 .htaccess` |

## Важные замечания

1. **Права на директории vs права на файлы**:
   - При установке прав на директории с флагом `-R` (рекурсивно), права устанавливаются как на саму директорию, так и на все файлы и поддиректории внутри неё.
   - Если вы хотите установить разные права для директории и файлов внутри неё, нужно выполнить две отдельные команды.

2. **Права 755 для директорий**:
   - Права 755 (rwxr-xr-x) для директорий означают, что владелец может читать, записывать и выполнять, а группа и остальные могут только читать и выполнять.
   - Право на выполнение для директории означает возможность просматривать её содержимое и переходить в неё.

3. **Права 644 для файлов**:
   - Права 644 (rw-r--r--) для файлов означают, что владелец может читать и записывать, а группа и остальные могут только читать.

4. **Права 666 для data.json**:
   - Права 666 (rw-rw-rw-) для файла data.json означают, что все (владелец, группа и остальные) могут читать и записывать в этот файл.
   - Это необходимо для корректной работы админ-панели, так как PHP-скрипты должны иметь возможность записывать в этот файл.

5. **Права 777 для директории uploads**:
   - Права 777 (rwxrwxrwx) для директории uploads означают, что все (владелец, группа и остальные) могут читать, записывать и выполнять.
   - Это необходимо для возможности загрузки новых изображений через админ-панель.

## Проверка прав доступа

После установки прав доступа рекомендуется проверить их корректность с помощью команды:

```bash
ls -la
```

Для проверки прав доступа в поддиректориях используйте:

```bash
ls -la assets/
ls -la assets/js/
ls -la assets/images/
```

## Решение проблем

Если после установки прав доступа возникают проблемы с работой сайта или админ-панели, проверьте следующее:

1. **Владелец и группа файлов**:
   - В некоторых случаях важно не только установить правильные права доступа, но и убедиться, что файлы принадлежат правильному пользователю и группе.
   - Используйте команду `chown` для изменения владельца и группы:
     ```bash
     chown www-data:www-data data.json
     ```

2. **Проверка логов ошибок**:
   - Проверьте файлы логов ошибок:
     ```bash
     cat update-prices-errors.log
     cat translations-sync-errors.log
     ```

3. **Проверка логов сервера**:
   - Проверьте логи веб-сервера для выявления ошибок доступа:
     ```bash
     cat /var/log/apache2/error.log  # для Apache
     cat /var/log/nginx/error.log    # для Nginx
     ```

## Заключение

Правильная настройка прав доступа является критически важной для корректной работы сайта и админ-панели. Рекомендуется использовать скрипт `update-permissions.sh` для автоматической установки всех необходимых прав доступа.

Если у вас возникают проблемы с правами доступа, обратитесь к документации вашего хостинг-провайдера или к специалисту по веб-разработке.

